# ğŸ“Š åç«¯å¼€å‘æ€»ç»“

## æ—¥æœŸ
2026-02-23

## èƒŒæ™¯
å‰ç«¯ MVP å·²å®Œæˆå¹¶éƒ¨ç½²åˆ° Vercelï¼Œéœ€è¦å®Œæˆåç«¯ API ä»¥æ”¯æŒå®Œæ•´åŠŸèƒ½ã€‚

## é—®é¢˜å‘ç°

### åŸå§‹æ¶æ„é—®é¢˜
1. âŒ é¡¹ç›®ç»“æ„ä¸å…¼å®¹ Vercel Serverless Functions
   - åç«¯ä»£ç åœ¨ `backend/src/` ç›®å½•ï¼Œä½¿ç”¨ Express æœåŠ¡å™¨
   - Vercel éœ€è¦ `api/` ç›®å½•ä¸‹çš„ Serverless Functions
   - éƒ¨ç½²æ—¶æ— æ³•æ­£ç¡®è·¯ç”± API è¯·æ±‚

2. âŒ è·¯ç”±æ–‡ä»¶ä¸­ç¼ºå°‘ imports
   - `companies.ts`, `transactions.ts`, `invoices.ts` ç­‰æ–‡ä»¶å¼•ç”¨äº†æœªå¯¼å…¥çš„ `authenticate` ä¸­é—´ä»¶

3. âŒ Controllers ä¸å®Œæ•´
   - åªæœ‰ `auth.ts` controller å®ç°
   - å…¶ä»– controllers ç¼ºå¤±ï¼Œå¯¼è‡´è·¯ç”±æ— æ³•å·¥ä½œ

4. âŒ æ•°æ®åº“è¿æ¥é…ç½®é”™è¯¯
   - `backend/.env` ä¸­ DATABASE_URL æŒ‡å‘æœ¬åœ° SQLite
   - éœ€è¦è¿æ¥ Supabase PostgreSQL

## è§£å†³æ–¹æ¡ˆ

### 1. æ¶æ„é‡æ„
- âœ… åˆ›å»ºäº† `api/index.ts` - ç»Ÿä¸€çš„ Vercel Serverless Function
- âœ… å°†æ‰€æœ‰ API è·¯ç”±é€»è¾‘æ•´åˆåˆ°ä¸€ä¸ªå¤„ç†å™¨ä¸­
- âœ… ä½¿ç”¨ Vercel é‡å†™è§„åˆ™å°† `/api/*` è·¯ç”±åˆ° `api/index`

### 2. å®Œæ•´ API å®ç°
åœ¨ `api/index.ts` ä¸­å®ç°äº†ä»¥ä¸‹åŠŸèƒ½ï¼š

**Auth API:**
- âœ… `POST /api/auth/login` - ç”¨æˆ·ç™»å½•
- âœ… `POST /api/auth/register` - ç”¨æˆ·æ³¨å†Œ
- âœ… `GET /api/auth/me` - è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯

**Companies API:**
- âœ… `GET /api/companies` - è·å–æ‰€æœ‰å…¬å¸
- âœ… `POST /api/companies` - åˆ›å»ºå…¬å¸
- âœ… `GET /api/companies/:id` - è·å–å•ä¸ªå…¬å¸
- âœ… `PUT /api/companies/:id` - æ›´æ–°å…¬å¸
- âœ… `DELETE /api/companies/:id` - åˆ é™¤å…¬å¸

**Transactions API:**
- âœ… `GET /api/transactions` - è·å–æ‰€æœ‰è´¢åŠ¡æµæ°´
- âœ… `POST /api/transactions` - åˆ›å»ºè´¢åŠ¡æµæ°´
- âœ… `GET /api/transactions/:id` - è·å–å•ä¸ªæµæ°´
- âœ… `PUT /api/transactions/:id` - æ›´æ–°æµæ°´
- âœ… `DELETE /api/transactions/:id` - åˆ é™¤æµæ°´

**Invoices API:**
- âœ… `GET /api/invoices` - è·å–æ‰€æœ‰å‘ç¥¨
- âœ… `POST /api/invoices` - åˆ›å»ºå‘ç¥¨
- âœ… `GET /api/invoices/:id` - è·å–å•ä¸ªå‘ç¥¨
- âœ… `PUT /api/invoices/:id` - æ›´æ–°å‘ç¥¨
- âœ… `DELETE /api/invoices/:id` - åˆ é™¤å‘ç¥¨

**Reports API:**
- âœ… `GET /api/reports/profit-loss` - æŸç›ŠæŠ¥è¡¨
- âœ… `GET /api/reports/cash-flow` - ç°é‡‘æµæŠ¥è¡¨
- âœ… `GET /api/reports/company-summary` - å…¬å¸æ±‡æ€»æŠ¥è¡¨

### 3. æ•°æ®åº“åˆå§‹åŒ–
- âœ… åˆ›å»ºäº† `docs/supabase-init.sql` - å®Œæ•´çš„æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
- âœ… åˆ›å»ºäº† `prisma/seed.ts` - Prisma seed è„šæœ¬
- âœ… åˆå§‹åŒ–äº†ç®¡ç†å‘˜è´¦å·ï¼š`admin@linheim.de` / `admin123`
- âœ… åˆå§‹åŒ–äº† 3 ä¸ªå…¬å¸ï¼š
  - Deyou international GmbH (DEYOU, EUR)
  - Wanling GmbH (WANLING, EUR)
  - æ±Ÿè‹ç¨‹è¾‰å•†è´¸æœ‰é™å…¬å¸ (JSCH, CNY)

### 4. é…ç½®æ›´æ–°
- âœ… æ›´æ–°äº† `package.json` - æ·»åŠ äº† `@vercel/node` ä¾èµ–
- âœ… æ›´æ–°äº† `vercel.json` - é…ç½®äº† Serverless Functions å’Œè·¯ç”±é‡å†™
- âœ… æ›´æ–°äº† `backend/.env` - è¿æ¥ Supabase æ•°æ®åº“
- âœ… åˆ›å»ºäº† `.env.example` - ç¯å¢ƒå˜é‡æ¨¡æ¿

### 5. æ–‡æ¡£æ›´æ–°
- âœ… åˆ›å»ºäº† `QUICK_DEPLOY.md` - å¿«é€Ÿéƒ¨ç½²æŒ‡å—
- âœ… æ›´æ–°äº† `DEPLOYMENT_GUIDE.md` - è¯¦ç»†éƒ¨ç½²æ­¥éª¤
- âœ… åˆ›å»ºäº† `docs/supabase-init.sql` - æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬

## æŠ€æœ¯æ ˆ

- **Runtime**: Node.js 18.x (Vercel Serverless Functions)
- **Framework**: Vercel Functions (æ— æ¡†æ¶ï¼ŒåŸç”Ÿå®ç°)
- **ORM**: Prisma 5.22.0
- **Database**: PostgreSQL (Supabase)
- **Auth**: JWT (jsonwebtoken)
- **Password**: bcryptjs

## æ•°æ®åº“è¡¨ç»“æ„

1. **users** - ç”¨æˆ·ç®¡ç†
2. **companies** - å…¬å¸ç®¡ç†
3. **transactions** - è´¢åŠ¡æµæ°´
4. **invoices** - å‘ç¥¨ç®¡ç†
5. **projects** - é¡¹ç›®ç®¡ç†ï¼ˆé¢„ç•™ï¼‰
6. **exchange_rates** - æ±‡ç‡è®°å½•

## éƒ¨ç½²æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Vercel Platform                â”‚
â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Frontend       â”‚  â”‚  Backend API â”‚ â”‚
â”‚  â”‚  (React + Vite)  â”‚  â”‚ (Serverless) â”‚ â”‚
â”‚  â”‚  /frontend/dist  â”‚  â”‚  /api/index  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚           â”‚                    â”‚        â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                    â”‚                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Supabase PostgreSQL              â”‚
â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Database (linheim-finance)     â”‚  â”‚
â”‚  â”‚   - users                        â”‚  â”‚
â”‚  â”‚   - companies                    â”‚  â”‚
â”‚  â”‚   - transactions                 â”‚  â”‚
â”‚  â”‚   - invoices                     â”‚  â”‚
â”‚  â”‚   - projects                     â”‚  â”‚
â”‚  â”‚   - exchange_rates               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## éƒ¨ç½²æ­¥éª¤æ€»ç»“

1. **åœ¨ Supabase ä¸­æ‰§è¡Œ `docs/supabase-init.sql`**
2. **ç¡®è®¤ Vercel ç¯å¢ƒå˜é‡é…ç½®**
3. **æ¨é€ä»£ç åˆ° GitHub**
4. **ç­‰å¾… Vercel è‡ªåŠ¨éƒ¨ç½²å®Œæˆ**
5. **æµ‹è¯•ç³»ç»ŸåŠŸèƒ½**

è¯¦ç»†æ­¥éª¤è¯·å‚è€ƒ `QUICK_DEPLOY.md`

## å·²çŸ¥é™åˆ¶

1. **æœ¬åœ°å¼€å‘é™åˆ¶**
   - å½“å‰ç¯å¢ƒæ— æ³•ç›´æ¥è¿æ¥ Supabaseï¼ˆç½‘ç»œé™åˆ¶ï¼‰
   - éœ€è¦åœ¨ Vercel ç¯å¢ƒä¸­æµ‹è¯•å®Œæ•´åŠŸèƒ½

2. **è®¤è¯ä¸­é—´ä»¶**
   - å½“å‰ `createdBy` å­—æ®µç¡¬ç¼–ç ä¸º 'admin'
   - TODO: ä» JWT token ä¸­æå–å®é™…ç”¨æˆ· ID

3. **æƒé™æ§åˆ¶**
   - å½“å‰åªå®ç°äº†åŸºæœ¬çš„è®¤è¯
   - TODO: å®ç°ç»†ç²’åº¦çš„æƒé™æ§åˆ¶ï¼ˆADMIN, FINANCE, COMPANY_ADMIN, VIEWERï¼‰

4. **æ–‡ä»¶ä¸Šä¼ **
   - å‘ç¥¨æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½æœªå®ç°
   - TODO: é›†æˆ Vercel Blob æˆ–å…¶ä»–å¯¹è±¡å­˜å‚¨

## åç»­ä¼˜åŒ–å»ºè®®

1. **æ€§èƒ½ä¼˜åŒ–**
   - æ·»åŠ æ•°æ®åº“ç´¢å¼•
   - å®ç°æŸ¥è¯¢åˆ†é¡µ
   - æ·»åŠ  Redis ç¼“å­˜

2. **å®‰å…¨åŠ å›º**
   - å®ç°é€Ÿç‡é™åˆ¶
   - æ·»åŠ  CSRF ä¿æŠ¤
   - æ›´æ–° JWT_SECRET

3. **åŠŸèƒ½å¢å¼º**
   - å¤šå¸ç§æ±‡ç‡è‡ªåŠ¨æ›´æ–°
   - Excel å¯¼å‡ºåŠŸèƒ½
   - PDF å‘ç¥¨ç”Ÿæˆ
   - é‚®ä»¶é€šçŸ¥

4. **ç›‘æ§å’Œæ—¥å¿—**
   - é›†æˆ Vercel Analytics
   - æ·»åŠ é”™è¯¯ç›‘æ§ï¼ˆSentryï¼‰
   - é…ç½®æ•°æ®åº“ç›‘æ§

## æ–‡ä»¶æ¸…å•

### æ–°å¢æ–‡ä»¶
- `api/index.ts` - Vercel Serverless Function API
- `docs/supabase-init.sql` - æ•°æ®åº“åˆå§‹åŒ– SQL
- `prisma/seed.ts` - Prisma seed è„šæœ¬
- `QUICK_DEPLOY.md` - å¿«é€Ÿéƒ¨ç½²æŒ‡å—
- `.env.example` - ç¯å¢ƒå˜é‡æ¨¡æ¿

### ä¿®æ”¹æ–‡ä»¶
- `package.json` - æ·»åŠ  @vercel/node ä¾èµ–
- `vercel.json` - æ›´æ–°éƒ¨ç½²é…ç½®
- `backend/.env` - æ›´æ–°æ•°æ®åº“è¿æ¥
- `DEPLOYMENT_GUIDE.md` - æ›´æ–°éƒ¨ç½²æ–‡æ¡£

### åˆ é™¤æ–‡ä»¶
æ— ï¼ˆä¿ç•™åŸæœ‰ä»£ç ä»¥ä¾›å‚è€ƒï¼‰

## æ€»ç»“

âœ… åç«¯ API å·²å®Œæˆå¹¶è½¬æ¢ä¸º Vercel Serverless Functions
âœ… æ•°æ®åº“ç»“æ„å®Œæ•´ï¼Œæ”¯æŒæ‰€æœ‰å‰ç«¯åŠŸèƒ½
âœ… æä¾›äº†å®Œæ•´çš„éƒ¨ç½²æ–‡æ¡£å’Œåˆå§‹åŒ–è„šæœ¬
âœ… ç¯å¢ƒå˜é‡å·²é…ç½®å¥½ï¼Œå¯ç›´æ¥éƒ¨ç½²

ä¸‹ä¸€æ­¥éœ€è¦ç”¨æˆ·ï¼š
1. åœ¨ Supabase ä¸­æ‰§è¡Œåˆå§‹åŒ– SQL
2. æ¨é€ä»£ç åˆ° GitHub è§¦å‘ Vercel éƒ¨ç½²
3. æµ‹è¯•ç³»ç»ŸåŠŸèƒ½

---

*å¼€å‘å®Œæˆæ—¶é—´ï¼š2026-02-23*
*å¼€å‘è€…ï¼šå°é¾™è™¾ ğŸ¦ áƒ¦( Â´ï½¥á´—ï½¥` )*
